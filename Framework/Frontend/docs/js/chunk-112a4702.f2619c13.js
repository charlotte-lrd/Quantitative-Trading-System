(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-112a4702"],{"3bc9":function(t,e,a){"use strict";a("8efd")},"8efd":function(t,e,a){},d111:function(t,e,a){"use strict";a.r(e);var n=a("7a23");const s=Object(n["gb"])("data-v-01a65d84");Object(n["H"])("data-v-01a65d84");const i={id:"DataAPI"},r=Object(n["n"])("div",{class:"panel-header"},"期货数据",-1),l=Object(n["n"])("div",{class:"panel-header-end"},null,-1),o={class:"panel-header pr"},c=Object(n["l"])('<div class="panel-header-end pr-end" data-v-01a65d84></div><div class="panel-header vl" data-v-01a65d84>Volume</div><div class="panel-header-end vl-end" data-v-01a65d84></div><svg id="Price" class="prices" style="width:520px;height:200px;" data-v-01a65d84></svg><svg id="Vol" class="volume" style="width:520px;height:200px;" data-v-01a65d84></svg>',5);Object(n["F"])();const d=s((t,e,a,d,h,p)=>{const g=Object(n["N"])("el-table-column"),u=Object(n["N"])("el-table");return Object(n["E"])(),Object(n["i"])("div",i,[r,l,Object(n["db"])(Object(n["n"])("input",{class:"asset-code",type:"text","onUpdate:modelValue":e[1]||(e[1]=t=>h.asset_code=t),placeholder:"Input Asset Code"},null,512),[[n["Y"],h.asset_code,void 0,{lazy:!0}]]),Object(n["db"])(Object(n["n"])("input",{class:"time-start",type:"text","onUpdate:modelValue":e[2]||(e[2]=t=>h.start_time=t),placeholder:"Input Start Time"},null,512),[[n["Y"],h.start_time,void 0,{lazy:!0}]]),Object(n["db"])(Object(n["n"])("input",{class:"time-end",type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>h.end_time=t),placeholder:"Input End Time"},null,512),[[n["Y"],h.end_time,void 0,{lazy:!0}]]),Object(n["db"])(Object(n["n"])("input",{class:"time-frequency",type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>h.frequency=t),placeholder:"Input Frequency"},null,512),[[n["Y"],h.frequency,void 0,{lazy:!0}]]),Object(n["n"])("div",{class:"time-button",onClick:e[5]||(e[5]=t=>p.getAsset()),type:"submit"},"Search"),Object(n["n"])("div",o,Object(n["R"])(h.flag),1),c,Object(n["n"])(u,{id:"DataTable",data:h.asset_show,onHeaderClick:p.Draw,height:"480","header-align":"center",style:{width:"52%"}},{default:s(()=>[Object(n["n"])(g,{fixed:"",prop:"trade_time",label:"Trade Time",width:"140"}),Object(n["n"])(g,{prop:"open",label:"open",width:"100"}),Object(n["n"])(g,{prop:"close",label:"close",width:"100"}),Object(n["n"])(g,{prop:"high",label:"high",width:"100"}),Object(n["n"])(g,{prop:"low",label:"low",width:"100"}),Object(n["n"])(g,{prop:"vol",label:"vol",width:"80"}),Object(n["n"])(g,{prop:"amount",label:"amount",width:"90"})]),_:1},8,["data","onHeaderClick"])])});var h=a("bc3a"),p=a.n(h),g=a("5698"),u={name:"DataAPI",data(){return{asset:[],asset_show:[],feature_show:[],width:490,height:200,margin:{top:20,right:10,bottom:10,left:50},r:10,c:20,asset_code:"",start_time:"",end_time:"",frequency:"",strategy:"",flag:"price"}},mounted(){},computed:{innerWidth(){return this.width-this.margin.left-this.margin.right},innerHeight(){return this.height-this.margin.top-this.margin.bottom}},methods:{getAsset(){const t="http://127.0.0.1:5000/"+this.asset_code+"/st="+this.start_time+"ed="+this.end_time+"freq="+this.frequency;p.a.get(t).then(t=>{this.asset=t.data,console.log(this.asset)}).catch(t=>{console.error(t)})},convertTime(){for(let t=0;t<this.asset.length;t++){let e=new Date(this.asset[t]["trade_time"]),a=e.getFullYear(),n=e.getMonth();n=n<10?"0"+n:n;let s=e.getDate();s=s<10?"0"+s:s;let i=e.getHours();i=i<10?"0"+i:i;let r=e.getMinutes();r=r<10?"0"+r:r,console.log(e),this.asset[t]["trade_time"]=a+"-"+n+"-"+s+" "+i+":"+r,t<200&&this.asset_show.push(this.asset[t])}console.log(this.asset_show)},Draw(t){let e=t.label;if(console.log(e),"Trade Time"==e||"vol"==e||"amount"==e)return;g["q"]("#Price").selectAll("g").remove();const a=g["q"]("#Price").append("g").attr("id","Pricesscale").attr("transform",`translate(${this.margin.left},${this.margin.top})`);let n=this;var s=[];for(let g=0;g<n.asset.length;g++)s.push(n.asset[g][e]);var[i,r]=g["e"](s);console.log(i,r);const l=g["p"]().domain([0,n.asset.length]).range([0,this.innerWidth]),o=g["p"]().domain([r,i]).range([0,this.innerHeight]),c=g["b"](o).ticks(10).tickSize(5).tickPadding(2).tickFormat((function(t){return t})),d=g["a"](l).ticks(20).tickSize(-5).tickPadding(-15).tickFormat((function(t){return t<n.asset.length?n.asset[t]["trade_time"].slice(5,10):n.asset[t-1]["trade_time"].slice(5,10)}));a.append("g").call(c).attr("id","yaxis"),a.append("g").call(d).attr("id","xaxis"),g["q"]("#xaxis").selectAll(".tick").selectAll("text").attr("font-size","9px");const h=g["q"]("#Price").append("g").attr("id","priceCurve").attr("transform",`translate(${this.margin.left},${this.margin.top})`);n.flag=e;const p=g["j"]().x((function(t,e){return l(e)})).y((function(t){return o(t)})).curve(g["d"]);h.append("path").attr("d",p(s)).attr("fill","none").attr("stroke","#3366ff")},Vol(){g["q"]("#Volscale").remove();const t=g["q"]("#Vol").append("g").attr("id","Volscale").attr("transform",`translate(${this.margin.left},${this.margin.top})`);let e=this;var a=[];for(let p=0;p<e.asset.length;){let t=e.asset[p]["trade_time"].slice(0,10),n=0;for(let s=0;;s++){if(p+s>=e.asset.length||e.asset[p+s]["trade_time"].slice(0,10)!=t){a.push({trade_date:t,vol:n}),p+=s;break}e.asset[p+s]["trade_time"].slice(0,10)==t&&(n+=e.asset[p+s]["vol"])}}var[n,s]=g["e"](a,(function(t){return t["vol"]}));console.log(n,s);const i=g["p"]().domain([0,a.length]).range([0,this.innerWidth]),r=g["p"]().domain([s,0]).range([0,this.innerHeight]),l=g["b"](r).ticks(10).tickSize(5).tickPadding(2).tickFormat((function(t){return t})),o=g["a"](i).ticks(20).tickSize(-5).tickPadding(-15).tickFormat((function(t){return 0==t?"":a[t-1]["trade_date"].slice(5)}));t.append("g").call(l).attr("id","yaxis"),t.append("g").call(o).attr("id","xaxis").attr("transform",`translate(0,${this.innerHeight})`),g["q"]("#xaxis").selectAll(".tick").selectAll("text").attr("font-size","6px").attr("transform","translate(0,20)");const c=g["s"]().keys(["vol"]).order(g["u"]).offset(g["t"]),d=c(a);console.log(d);const h=g["q"]("#Vol").append("g").attr("id","VolBar").attr("transform",`translate(${this.margin.left},${this.margin.top})`);h.selectAll("rect").data(d[0]).enter().append("rect").attr("class","bar").attr("x",(function(t,e){return i(e+.5)})).attr("y",(function(t){return r(t[1])})).attr("height",(function(t){return r(t[0])-r(t[1])})).attr("width",this.innerWidth/a.length).attr("fill","red").attr("stroke","#000")},colorbox(t,e,a){var[n,s]=g["e"](a.domain()),i=g["n"](n,s,(s-n)/e[1]),r=g["p"]().domain([n,s]).range([0,e[1]]);t.selectAll("line").data(i).enter().append("line").attr("x1",0).attr("x2",e[0]).attr("y1",r).attr("y2",r).attr("stroke",a),t.append("rect").attr("width",e[0]).attr("height",e[1]).attr("fill","none").attr("stroke","black")}},created(){},beforeUnmount(){},watch:{asset(){this.convertTime(),this.Vol()}}},m=(a("3bc9"),a("6b0d")),b=a.n(m);const f=b()(u,[["render",d],["__scopeId","data-v-01a65d84"]]);e["default"]=f}}]);
//# sourceMappingURL=chunk-112a4702.f2619c13.js.map