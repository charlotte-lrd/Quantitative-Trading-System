(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3724c5db"],{8945:function(module,__webpack_exports__,__webpack_require__){"use strict";var axios__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("bc3a"),axios__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(axios__WEBPACK_IMPORTED_MODULE_0__),d3__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("5698");__webpack_exports__["a"]={name:"DataAPI",data(){return{heatmap:[],trade:[],width:800,height:360,margin:{top:40,right:30,bottom:10,left:40},r:10,c:40,timegap:100,timelist:[],pricelist:[],heat_aggregated:[],start:"1645361597595"}},mounted(){this.Scale()},computed:{pricegap(){var[t,a]=d3__WEBPACK_IMPORTED_MODULE_1__["e"](this.heatmap,(function(t){return t["price"]}));return(a-t)/10},showTip(){return this.flag},heat(){return console.log(this.heatmap),this.heatmap},innerWidth(){return this.width-this.margin.left-this.margin.right},innerHeight(){return this.height-this.margin.top-this.margin.bottom},trd(){return this.trade},stt(){return console.log(new Date(this.start).getTime()),new Date(this.start).getTime()},gap(){return this.timegap}},methods:{getHeatmap(){const path="http://127.0.0.1:5000/Heatmap/?start="+this.stt+"&year="+eval("2022")+"&month="+eval("2")+"&day="+eval("20")+"&timegap="+this.timegap;axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(path).then(t=>{console.log(t.data),this.heatmap=t.data}).catch(t=>{console.error(t)})},getTimeList(){for(var[t,a]=d3__WEBPACK_IMPORTED_MODULE_1__["e"](this.heatmap,(function(t){return t["time"]})),e=t;e<=a;e+=this.timegap)this.timelist.push(e);this.timelist.push(e),console.log(this.timelist),console.log(this.timelist[2]),console.log(new Date(this.timelist[6]))},getPriceList(){for(var[t,a]=d3__WEBPACK_IMPORTED_MODULE_1__["e"](this.heatmap,(function(t){return t["price"]})),e=t;e<=a;e+=this.pricegap)this.pricelist.push(e);this.pricelist.push(e)},getTrade(){const path="http://127.0.0.1:5000/Trade/?beg="+eval(this.timelist[0])+"&end="+eval(this.timelist[this.timelist.length-1])+"&year="+eval("2022")+"&month="+eval("2")+"&day="+eval("20");axios__WEBPACK_IMPORTED_MODULE_0___default.a.get(path).then(t=>{console.log(t.data),this.trade=t.data}).catch(t=>{console.error(t)})},Scale(){const t=d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#Heatmap").append("g").attr("id","heatmapview").attr("transform",`translate(${this.margin.left},${this.margin.top})`);let a=this;const e=d3__WEBPACK_IMPORTED_MODULE_1__["p"]().domain([0,this.timelist.length]).range([0,this.innerWidth]),_=d3__WEBPACK_IMPORTED_MODULE_1__["p"]().domain([this.pricelist[this.pricelist.length-1],this.pricelist[0]]).range([0,this.innerHeight]),i=d3__WEBPACK_IMPORTED_MODULE_1__["b"](_).ticks(this.pricelist.length).tickSize(5).tickPadding(5),d=d3__WEBPACK_IMPORTED_MODULE_1__["a"](e).ticks(this.timelist.length).tickSize(-5).tickPadding(-15).tickFormat((function(t,e){let _=0==e?new Date:new Date(a.timelist[e-1]);return 0==e?"":(_.getHours()>=10?_.getHours():"0"+_.getHours())+":"+(_.getMinutes()>=10?_.getMinutes():"0"+_.getMinutes())+":"+(_.getSeconds()>=10?_.getSeconds():"0"+_.getSeconds())+":"+Math.floor(_.getMilliseconds()/100)}));t.append("g").call(i).attr("id","yaxis"),t.append("g").call(d).attr("id","xaxis")},GHOST(){let t=this;t.flag="GHOST",d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#heatmapview").selectAll("rect").remove(),d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#Heatmap").selectAll("#legend").remove(),t.r=t.pricelist.length,t.c=t.timelist.length,console.log(t.c);var[a,e]=d3__WEBPACK_IMPORTED_MODULE_1__["e"](d3__WEBPACK_IMPORTED_MODULE_1__["f"](t.heatmap,t=>t["position"].indexOf("bid")>=0),(function(t){return t["vol"]})),[_,i]=d3__WEBPACK_IMPORTED_MODULE_1__["e"](d3__WEBPACK_IMPORTED_MODULE_1__["f"](t.heatmap,t=>t["position"].indexOf("ask")>=0),(function(t){return t["vol"]}));const d=d3__WEBPACK_IMPORTED_MODULE_1__["p"]().domain([0,this.timelist.length]).range([0,this.innerWidth]),s=d3__WEBPACK_IMPORTED_MODULE_1__["p"]().domain([this.pricelist[this.pricelist.length-1],this.pricelist[0]]).range([0,this.innerHeight]);d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#heatmapview").selectAll("circle").data(this.heatmap).enter().append("circle").attr("fill",(function(t){return t["position"].indexOf("ask")>=0?d3__WEBPACK_IMPORTED_MODULE_1__["h"]((t["vol"]-_)/(i-_)):d3__WEBPACK_IMPORTED_MODULE_1__["g"]((t["vol"]-a)/(e-a))})).attr("r",this.innerWidth/this.c/3-3).attr("cx",(function(t){return d(t["id"]+1)+"px"})).attr("cy",(function(t){return s(t["price"])+"px"})).on("mouseover",(function(){let t=d3__WEBPACK_IMPORTED_MODULE_1__["q"](this).data();var a="vol:"+t[0]["vol"]+"<br>price:"+t[0]["price"]+"<br>position:"+t[0]["position"],e=60+s(t[0]["price"]);d3__WEBPACK_IMPORTED_MODULE_1__["r"](".tooltip").html(a).style("left",d(t[0]["id"])+35+"px").style("top",e+270+"px").style("opacity",1)})).on("mouseleave",(function(){d3__WEBPACK_IMPORTED_MODULE_1__["r"](".tooltip").style("opacity",0)})),d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#Heatmap").append("g").attr("id","legend1").call(t.colorbox,[10,120],d3__WEBPACK_IMPORTED_MODULE_1__["o"]([i,_],(function(t){return d3__WEBPACK_IMPORTED_MODULE_1__["h"](t)}))).attr("transform",`translate(${10+t.width-t.margin.right},25)`),d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#legend1").append("g").call(d3__WEBPACK_IMPORTED_MODULE_1__["c"](d3__WEBPACK_IMPORTED_MODULE_1__["p"]().domain([_,i]).range([120,0])).ticks(5)).attr("transform","translate(10,0)"),d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#legend1").append("text").text("ask volume").attr("transform","translate(-25,-8)").attr("font-size","10px"),d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#Heatmap").append("g").attr("id","legend2").call(t.colorbox,[10,120],d3__WEBPACK_IMPORTED_MODULE_1__["o"]([e,a],(function(t){return d3__WEBPACK_IMPORTED_MODULE_1__["g"](t)}))).attr("transform",`translate(${10+t.width-t.margin.right},165)`),d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#legend2").append("g").call(d3__WEBPACK_IMPORTED_MODULE_1__["c"](d3__WEBPACK_IMPORTED_MODULE_1__["p"]().domain([a,e]).range([120,0])).ticks(5)).attr("transform","translate(10,0)"),d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#legend1").append("text").text("bid volume").attr("transform","translate(-25,272)").attr("font-size","10px")},colorbox(t,a,e){var[_,i]=d3__WEBPACK_IMPORTED_MODULE_1__["e"](e.domain()),d=d3__WEBPACK_IMPORTED_MODULE_1__["n"](_,i,(i-_)/a[1]),s=d3__WEBPACK_IMPORTED_MODULE_1__["p"]().domain([_,i]).range([0,a[1]]);t.selectAll("line").data(d).enter().append("line").attr("x1",0).attr("x2",a[0]).attr("y1",s).attr("y2",s).attr("stroke",e),t.append("rect").attr("width",a[0]).attr("height",a[1]).attr("fill","none").attr("stroke","black")},Price(){let t=this;const a=d3__WEBPACK_IMPORTED_MODULE_1__["p"]().domain([0,this.timelist.length]).range([0,this.innerWidth]),e=d3__WEBPACK_IMPORTED_MODULE_1__["p"]().domain([this.pricelist[this.pricelist.length-1],this.pricelist[0]]).range([0,this.innerHeight]),_=t.timelist[0],i=t.timelist[t.timelist.length-1];var d=t.trade.map(t=>[(t["time"]-_)/(i-_),t["price"]]);console.log(d);var s=d3__WEBPACK_IMPORTED_MODULE_1__["j"]().curve(d3__WEBPACK_IMPORTED_MODULE_1__["d"]).x(e=>a((e["time"]-_)/(i-_)*t.timelist.length)).y(t=>e(t["price"]));console.log(t.trade),console.log(s(t.trade)),d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#heatmapview").append("g").attr("id","trade").append("path").attr("d",s(t.trade)).attr("fill","none").attr("stroke","lightblue").attr("stroke-width",2.5),d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#trade").selectAll("rect").data(t.trade).enter().append("rect").attr("fill","orange").attr("width",10).attr("height",10).attr("transform",(function(d){return`translate(${a((d["time"]-_)/(i-_)*t.timelist.length)-5},${e(d["price"])-5})`}))}},created(){this.getHeatmap()},beforeUnmount(){},watch:{heat(){this.getTimeList(),this.getPriceList(),this.getTrade(),this.Scale(),this.GHOST()},trd(){this.Price()},stt(){d3__WEBPACK_IMPORTED_MODULE_1__["q"]("#heatmapview").remove(),this.getHeatmap(),console.log(Number(new Date(this.start)))},gap(){this.getHeatmap(),console.log(this.timegap)}}}},"9ec3":function(t,a,e){"use strict";e.r(a);var _=e("7a23");const i=Object(_["gb"])("data-v-dd1311b8");Object(_["H"])("data-v-dd1311b8");const d={style:{width:"100%",height:"100%"}},s=Object(_["l"])('<div id="guide" class="news-guide" data-v-dd1311b8><div class="slogan" style="background-size:auto 380px;" data-v-dd1311b8><div class="data-content" data-v-dd1311b8><h2 class="data-banner-sdktitle" data-v-dd1311b8> 本地量化数据开放使用 </h2><p class="data-banner-sdksubtitle" data-v-dd1311b8><span class="sdksubtitle-text" data-v-dd1311b8>支持本地调用，提供以期货为主的全品种量化数据</span></p></div></div></div><div class="guide-box" data-v-dd1311b8><div class="data-dictionary" data-v-dd1311b8><div class="data-dictionary-title" data-v-dd1311b8><div class="line left" data-v-dd1311b8></div><h3 data-v-dd1311b8>数据字典</h3><div class="line right" data-v-dd1311b8></div></div><div class="data-dictionary-content mb_36" data-v-dd1311b8><div class="data-dic" data-v-dd1311b8><a href="http://127.0.0.1:5000" data-v-dd1311b8><h4 data-v-dd1311b8>期货数据</h4><p data-v-dd1311b8>涵盖中金所、上期所、郑商所和大商所的所有期货合约数据</p></a></div><div class="data-dic" data-v-dd1311b8><a href="/help/api/help#name:Option" data-v-dd1311b8><h4 data-v-dd1311b8>期权数据</h4><p data-v-dd1311b8>提供股票期权和商品期权的合约资料和行情数据</p></a></div><div class="data-dic" data-v-dd1311b8><a href="/help/api/help#name:plateData" data-v-dd1311b8><h4 data-v-dd1311b8>行业概念数据</h4><p data-v-dd1311b8>包含行业板块、概念板块数据</p></a></div><div class="data-dic" data-v-dd1311b8><a href="/help/api/help#name:index" data-v-dd1311b8><h4 data-v-dd1311b8>指数数据</h4><p data-v-dd1311b8>包含沪深市场多只指数数据</p></a></div><div class="data-dic" data-v-dd1311b8><a href="/help/api/help#name:macroData" data-v-dd1311b8><h4 data-v-dd1311b8>宏观经济数据</h4><p data-v-dd1311b8>包含国内的重要宏观经济数据</p></a></div><div class="data-dic" data-v-dd1311b8><a href="/help/api/help#name:fund" data-v-dd1311b8><h4 data-v-dd1311b8>场内基金数据</h4><p data-v-dd1311b8>包含ETF、LOF、分级基金、货币基金完整的行情、净值数据</p></a></div><div class="data-dic" data-v-dd1311b8><a href="/help/api/help#name:OTCfund" data-v-dd1311b8><h4 data-v-dd1311b8>场外基金数据</h4><p data-v-dd1311b8>提供场外基金单位净值、复权净值、投资组合等数据</p></a></div><div class="data-dic" data-v-dd1311b8><a href="/help/api/help#name:Public" data-v-dd1311b8><h4 data-v-dd1311b8>舆情数据</h4><p data-v-dd1311b8>包含CCTV等舆情数据</p></a></div></div></div></div>',2);Object(_["F"])();const r=i((t,a,e,i,r,n)=>(Object(_["E"])(),Object(_["i"])("div",d,[s])));var n=e("8945"),l=(e("e5c1"),e("6b0d")),h=e.n(l);const o=h()(n["a"],[["render",r],["__scopeId","data-v-dd1311b8"]]);a["default"]=o},e5c1:function(t,a,e){"use strict";e("ff9b")},ff9b:function(t,a,e){}}]);
//# sourceMappingURL=chunk-3724c5db.9daa260e.js.map