{"remainingRequest":"D:\\复旦大二暑假\\暑研\\Eth2.0-Vis-main\\Eth2.0-Vis-main\\vue-template\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\复旦大二暑假\\暑研\\Eth2.0-Vis-main\\Eth2.0-Vis-main\\vue-template\\src\\components\\Slot.vue?vue&type=style&index=0&id=d55931a4&scoped=true&lang=css","dependencies":[{"path":"D:\\复旦大二暑假\\暑研\\Eth2.0-Vis-main\\Eth2.0-Vis-main\\vue-template\\src\\components\\Slot.vue","mtime":1657000431408},{"path":"D:\\复旦大二暑假\\暑研\\Eth2.0-Vis-main\\Eth2.0-Vis-main\\vue-template\\node_modules\\css-loader\\dist\\cjs.js","mtime":1657630373282},{"path":"D:\\复旦大二暑假\\暑研\\Eth2.0-Vis-main\\Eth2.0-Vis-main\\vue-template\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1657630376024},{"path":"D:\\复旦大二暑假\\暑研\\Eth2.0-Vis-main\\Eth2.0-Vis-main\\vue-template\\node_modules\\postcss-loader\\src\\index.js","mtime":1657630376540},{"path":"D:\\复旦大二暑假\\暑研\\Eth2.0-Vis-main\\Eth2.0-Vis-main\\vue-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657630378692},{"path":"D:\\复旦大二暑假\\暑研\\Eth2.0-Vis-main\\Eth2.0-Vis-main\\vue-template\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1657630374383}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci50b29sdGlwX2RlbGF5ewogICAgcG9zaXRpb246IGFic29sdXRlOwogICAgcGFkZGluZy1sZWZ0OjVweDsKICAgIHBhZGRpbmctcmlnaHQ6NXB4OwogICAgd2lkdGg6YXV0bzsKICAgIGhlaWdodDphdXRvOwogICAgYm9yZGVyOjFweCBzb2xpZCAjMmVhNDRmOwogICAgYm9yZGVyLXJhZGl1czo1cHg7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTsKICAgIGZvbnQtc2l6ZTogOHB4OwogICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgb3BhY2l0eTowOwogICAgei1pbmRleDo5OTk7CgkJfQoKLnBhbmVsLWhlYWRlciB7CiAgcG9zaXRpb246IGFic29sdXRlOwogIGxlZnQ6MHB4OwogIHRvcDoyNTBweDsKICBwYWRkaW5nOiAtMTBweCAyMHB4OwogIHdpZHRoOiA0NXB4OwogIGhlaWdodDogMThweDsKICBsaW5lLWhlaWdodDogMThweDsKICBmb250LXNpemU6IDhweDsKICB0ZXh0LWFsaWduOiBsZWZ0OwogIGJhY2tncm91bmQ6ICM0MTVjNjg7CiAgY29sb3I6ICNmY2ZjZmM7CiAgZGlzcGxheTogZmxleDsKICBmb250LXdlaWdodDogYm9sZDsKICBib3JkZXItcmFkaXVzOiAxcHg7CiAgYm94LXNoYWRvdzogMCAxcHggMnB4IHJnYmEoMjYgMjYgMjYgMC4yKTsKICB6LWluZGV4Ojk5OwoKfQoKLnBhbmVsLWhlYWRlci1lbmQgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDI1MHB4OwogIGxlZnQ6IDYxcHg7CiAgYm9yZGVyLXRvcDogMThweCBzb2xpZCAjNDU1YTY0OwogIGJvcmRlci1yaWdodDogMThweCBzb2xpZCAjZmZmZmZmOwogIGJvcmRlci1ib3R0b206IDBweCBzb2xpZCAjZmZmZmZmOwogIHotaW5kZXg6OTg7Cn0KCg=="},{"version":3,"sources":["D:\\复旦大二暑假\\暑研\\Eth2.0-Vis-main\\Eth2.0-Vis-main\\vue-template\\src\\components\\Slot.vue"],"names":[],"mappings":"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AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EAChB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAClB,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AACZ","file":"D:/复旦大二暑假/暑研/Eth2.0-Vis-main/Eth2.0-Vis-main/vue-template/src/components/Slot.vue","sourceRoot":"","sourcesContent":["<template>\n  <div>\n    <div class=\"panel-header\">SlotView</div>\n    <div class=\"panel-header-end\"></div>\n    <svg id = \"Slot\" style = 'width:805px; height:315px'></svg>\n    <div class=\"tooltip_delay\"></div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport * as d3 from 'd3'\n\nexport default {\n  name:'Slot',\n  props:[\"msg\"],\n  data(){\n\n    return {\n      slots:[],\n      links:[],\n      delays:[],\n      width: 650,\n      height: 850,\n      margin:{\n        top:72,\n        right:85,\n        bottom:0,\n        left:25\n      },\n      c:32,\n      extent_m:0,\n      extent_M:0,\n      h:0,\n      q:0,\n      timer:\"\"\n    };\n  },\n  mounted(){\n      this.timer = setInterval(this.getSlot,10000);\n  },\n  computed:{\n    slot(){\n      return this.slots\n    },\n    message(){\n      console.log(this.msg)\n      return this.msg\n    },\n    innerWidth(){\n      return this.width - this.margin.left - this.margin.right\n    },\n    innerHeight(){\n      return this.height - this.margin.top - this.margin.bottom\n    },\n    epochs(){\n      let e = [this.msg - 1, this.msg + 1]\n      return e\n    }\n  },\n  methods:{\n     getSlot(){\n      //  const path = 'http://127.0.0.1:5000/slot/' + eval(this.msg);\n      // const path = 'http://127.0.0.1:5000/SlotView_Attack/' + eval(this.msg);\n      var path = '';\n      if(eval(this.msg) == 32533){\n        path = 'http://127.0.0.1:5000/SlotView_Attack/' + eval(this.msg);\n      }else{\n        path = 'http://127.0.0.1:5000/slot/' + eval(this.msg+1);\n      }\n       console.log(path);\n       axios\n         .get(path)\n         .then(res => {\n           console.log(res);\n           this.slots=res.data[0];\n           this.links = res.data[1];\n           this.delays = res.data[2];\n         })\n         .catch(error => {\n           console.error(error);\n         });\n     },\n\n     xScale(){\n      // let that = this;\n      const g = d3.select('#Slot').append('g').attr('id', 'slotview')\n                   .attr('transform', `translate(${this.margin.left},${this.margin.top})`);\n      const xscale = d3.scaleLinear()\n                       .domain([-1,this.c])\n                       .range([0, this.innerWidth]);\n\n      const xaxis = d3.axisBottom(xscale)\n                      .ticks(34)\n                      .tickSize(-5)\n                      .tickPadding(10)\n                      .tickFormat(function(d,i){console.log(i==0?0:1)\n                      return (i < 33 && i > 0) ? (i-1): \"\";});\n        \n       g.append('g').call(xaxis)\n        .attr('id', 'xaxis')\n        .selectAll('text')\n        .attr('transform',`translate(${this.innerWidth/68},${0})`)\n        .attr('font-size', '10px');\n      \n\n\n      // g.append('circle')\n      //   .attr('cx',xscale(32)+that.innerWidth/68)\n      //   .attr('cy',0)\n      //   .attr('r',8)\n      //   .attr('fill','#6BFF88')\n\n     },\n\n     Color(num){\n      let that = this;\n      var [m_temp,n] = d3.extent(d3.filter(that.slots, x=>x.block_header !=0), function(d){return d.block_header})\n      var prev = m_temp == 0? m_temp : n;\n      var m = 0;\n      for(let j = 0; j < that.slots.length; j++){\n          m = d3.min(that.slots[j]['ex_blocks'])\n          if(m < prev){\n            prev = m;\n          }\n         }\n\n      that.extent_m = prev;\n      that.extent_M = n\n      const color =d3.scaleDivergingSymlog([prev,0.8*prev+0.2*n,n], function(t){return d3.interpolateBlues(t);})\n      return color(num)\n    },\n\n    ColorCasper(num){\n      let that = this;\n      var [h,q] = d3.extent(d3.filter(that.slots, x=>x.block_header !=0), function(d){return d.casper_balance;})\n      //var cas_opa = d3.scaleLinear().domain([h,q]).range([0.2, 1]);\n      const color =d3.scaleDivergingSymlog([h/1.2,0.2*h+0.8*q,q], function(t){return t;})\n      return color(num)\n    },\n\n     drawBlockheader(){\n      let that = this;\n      console.log(that.Color(20))\n      const xscale = d3.scaleLinear()\n                       .domain([-1,this.c])\n                       .range([0, this.innerWidth]);\n      var [a,b] = d3.extent(that.slots, function(d){return d.at_number;})\n      console.log([a,b]);\n      var distribute = d3.scaleLinear().domain([a,b]).range([10, this.innerWidth/34]);\n\n     d3.select('#slotview').append('g').attr('id','block_header')\n        .selectAll('rect').data(that.slots).enter()\n        .append('rect')\n        .attr('transform',function(d,i){\n        return `translate(${xscale(i)+that.innerWidth/68-distribute(d.at_number)/2}, ${-distribute(d.at_number)/2})`;\n        })\n        .attr('width', function(d){\n          return d.at_number == 0? 0 : distribute(d.at_number);} )//长宽待定\n        .attr('height', function(d){\n          let hei = d.at_number == 0? 0 : distribute(d.at_number)\n          return hei/2;})\n        .attr('fill', function(d){return that.Color(d.block_header);})\n        .attr('opacity', 0.9)\n     },\n\n     drawCasper(){\n      let that=this;\n      const xscale = d3.scaleLinear()\n                       .domain([-1,this.c])\n                       .range([0, this.innerWidth]);\n      var [a,b] = d3.extent(that.slots, function(d){return d.at_number;})\n      console.log([a,b]);\n      var distribute = d3.scaleLinear().domain([a,b]).range([10, this.innerWidth/34]);\n      var [h,q] = d3.extent(d3.filter(that.slots, x=>x.block_header !=0), function(d){return d.casper_balance;})\n      //var cas_opa = d3.scaleLinear().domain([h,q]).range([0.2, 1]);\n      that.h = h;\n      that.q = q;\n\n      d3.select('#slotview').append('g').attr('id','casper_balance')\n        .selectAll('rect').data(that.slots).enter()\n        .append('rect')\n        .attr('transform',function(d,i){\n        return `translate(${xscale(i)+that.innerWidth/68-distribute(d.at_number)/2}, ${0})`;\n        })\n        .attr('width', function(d){\n          return d.at_number == 0? 0 : distribute(d.at_number);} )//长宽待定\n        .attr('height', function(d){\n          let hei = d.at_number == 0? 0 : distribute(d.at_number)\n          return hei/2;})\n        .attr('fill', \"#6B3593\")//function(d){return d3.interpolatePurples(d.block_header == 0? 0.1:cas_opa(d.casper_balance))})\n        .attr('opacity', function(d){return that.ColorCasper(d.casper_balance);})\n     },\n     \n     drawDelay(){\n      console.log(\"drawBlocks\");\n      var ex_block = this.innerWidth/40;  \n      const xscale = d3.scaleLinear()\n                  .domain([-1,this.c])\n                  .range([0, this.innerWidth]);\n      let that = this;\n      var [a,b] = d3.extent(that.delays, function(d){return d.count;})\n      console.log([a,b]);\n      var distribute = d3.scaleLinear().domain([a,b]).range([5, this.innerWidth/80]);\n\n      d3.select('#slotview').append('g').attr('id','delays')\n        .selectAll('circle')\n        .data(that.delays).enter()\n        .append('circle')\n        .attr('cx',xscale(-1)+that.innerWidth/68)\n        .attr('cy',function(d,i){return -i*(ex_block+2);})\n        .attr('r',function(d){\n          return distribute(d.count);\n        })\n        .attr('fill',\"#F48FB1\")\n        .on(\"mouseover\",function(){\n        let d =d3.select(this).data();\n        var str =\"Delay length:\" + d[0]['gap'] + \"<br>Number of Attestation:\"+d[0]['count'];\n      \n        console.log(d3.select(this));\n        d3.selectAll('.tooltip_delay')\n          .html(str)\n               .style(\"left\", (xscale(-1))+\"px\")\n               .style(\"top\", (300-d[0]['gap']*(ex_block+8))+\"px\")\n               .style(\"opacity\",1.0);\n    })\n      .on(\"mouseleave\",function(){\n            d3.selectAll('.tooltip_delay')\n              .style(\"opacity\",0.0);\n          })\n      // g.append('circle')\n      //   .attr('cx',xscale(32)+that.innerWidth/68)\n      //   .attr('cy',0)\n      //   .attr('r',8)\n      //   .attr('fill','#6BFF88')\n      \n     },\n\n     drawExBlocks(){\n      console.log(\"drawBlocks\");\n      var ex_block = this.innerWidth/50;  \n      const xscale = d3.scaleLinear()\n                  .domain([-1,this.c])\n                  .range([0, this.innerWidth]);\n      let that = this;\n\n      for(let j = 0; j < that.slots.length; j++){\n          // var [u,v] = d3.extent(that.slots[j]['ex_blocks'])\n          // var dis = d3.scaleLinear().domain([u,v]).range([0.1, 1]);\n          d3.select('#slotview').append('g').attr('id','ex_block'+j).selectAll('rect')\n          .data(that.slots[j]['ex_blocks']).enter()\n              .append('rect')\n          .attr('transform',function(d,i){\n              return `translate(${xscale(j)+that.innerWidth/68-ex_block/2},${-i*(ex_block+2)-that.innerWidth/34-4})`;\n              })\n          .attr('width', ex_block)\n          .attr('height', ex_block)\n          .attr('fill',function(d){return that.Color(d);})\n          .attr('stroke',\"#F8BBD0\")\n          .attr('opacity',1)\n          }\n\n\n     },\n     arc(lines){\n        const xscale = d3.scaleLinear()\n                       .domain([-1,this.c])\n                       .range([0, this.innerWidth]);\n\n        const x1 = xscale(lines.source)+this.innerWidth/68;\n        const x2 = xscale(lines.target)+this.innerWidth/68;\n        const r = Math.abs(x2 - x1) / 2 ;\n      return `m${x1},${this.innerWidth/30+3}A${r},${r/1.17} 0,0,0 ${x2},${this.innerWidth/30+3}`;\n     },\n\n     drawArc(){\n      let that = this;\n      console.log(that.links)\n      var [e,f] = d3.extent(that.links, function(d){return d.value;})\n      console.log([e,f]);\n      var thickness = d3.scaleLinear().domain([e,f]).range([1, 10]);\n\n      d3.select('#slotview').append('g').attr('id','inclusion_delay').attr('fill','none')\n          .selectAll(\"path\")\n          .data(that.links).enter()\n          .append(\"path\").attr(\"d\",that.arc).attr(\"stroke-width\",function(d){return thickness(d.value);})\n          .attr(\"stroke\", function(d){return d.correct ? \"#55A674\":\"#C64D6B\";})\n\n     },\n     colorbox(sel, size, colors){\n    var [x0,x1] = d3.extent( colors.domain());\n    var bars = d3.range( x0, x1, (x1-x0)/size[0]);\n    var sc = d3.scaleLinear()\n        .domain([x0,x1]).range([0, size[0]]);\n    sel.selectAll(\"line\").data(bars).enter().append(\"line\")\n      .attr(\"x1\", sc).attr(\"x2\",sc)\n      .attr(\"y1\", 0).attr(\"y2\",size[1])\n      .attr(\"stroke\",colors);\n    \n    sel.append(\"rect\")\n        .attr(\"width\",size[0]).attr(\"height\",size[1])\n        .attr(\"fill\",\"none\").attr(\"stroke\",\"black\")\n      },\n\n     Legend(){\n       let that = this;\n       var lg = d3.select('#Slot').append('g').attr('id','legend')\n                  .attr('transform', `translate(${600},${30})`)\n       lg.append('rect')\n         .attr('width',that.innerWidth/35)\n         .attr('height', that.innerWidth/70)\n         .attr('transform', `translate(${55},${35})`)\n         .attr('fill','#2665A5')\n\n       lg.append('rect')\n         .attr('width',that.innerWidth/35)\n         .attr('height', that.innerWidth/70)\n         .attr('transform', `translate(${55},${35+that.innerWidth/70})`)\n         .attr('fill','#AF7AC5')\n\n       lg.append('text')\n         .text(' — GHOST balance')\n         .attr('transform', `translate(${77},${41})`)\n         .attr('font-size','9px')\n\n       lg.append('text')\n         .text(' — Casper balance')\n         .attr('transform', `translate(${77},${44+that.innerWidth/70})`)\n         .attr('font-size','9px')\n       \n       lg.append('text')\n         .text('Block size: number of attestations inside')\n         .attr('transform', `translate(${25},${60+that.innerWidth/70})`)\n         .attr('font-size','9px')\n\n       lg.append('rect')\n         .attr('width',that.innerWidth/50)\n         .attr('height', that.innerWidth/50)\n         .attr('transform', `translate(${60},${18})`)\n         .attr('fill','lightblue')\n\n       lg.append('text')\n         .text(' — Competing blocks')\n         .attr('transform', `translate(${77},${18+that.innerWidth/100})`)\n         .attr('font-size','9px')\n\n       lg.append('circle')\n         .attr('r', 5)\n         .attr('fill', '#F48FB1')\n         .attr('transform',`translate(${65},${140+that.innerWidth/50})`)\n\n       lg.append('text')\n         .text('Finalization Delay')\n         .attr('transform', `translate(${77},${144+that.innerWidth/50})`)\n         .attr('font-size','9px')\n\n      //  lg.append('circle')\n      //    .attr('r', 8)\n      //    .attr('fill', '#6BFF88')\n      //    .attr('transform',`translate(${610+that.innerWidth/50},${11})`)\n\n      //  lg.append('text')\n      //    .text('Next Epoch')\n      //    .attr('transform', `translate(${620+that.innerWidth/50},${3+that.innerWidth/100})`)\n      //    .attr('font-size','10px')\n\n       lg.append('circle')\n         .attr('r', 10)\n         .attr('fill', 'white')\n         .attr('stroke',\"#C64D6B\")\n         .attr('transform',`translate(${60},${180+that.innerWidth/50})`)\n\n       lg.append('rect')\n         .attr('width',22)\n         .attr('height', 12)\n         .attr('transform', `translate(${49},${168+that.innerWidth/50})`)\n         .attr('fill','white')\n       \n       lg.append('text')\n         .text('Target wrong attestations')\n         .attr('transform', `translate(${75},${190+that.innerWidth/50})`)\n         .attr('font-size','9px')\n\n       lg.append('circle')\n         .attr('r', 10)\n         .attr('fill', 'white')\n         .attr('stroke',\"#55A674\")\n         .attr('transform',`translate(${60},${210+that.innerWidth/50})`)\n\n       lg.append('rect')\n         .attr('width',22)\n         .attr('height', 12)\n         .attr('transform', `translate(${49},${198+that.innerWidth/50})`)\n         .attr('fill','white')\n       \n       lg.append('text')\n         .text('Target correct attestations')\n         .attr('transform', `translate(${75},${220+that.innerWidth/50})`)\n         .attr('font-size','9px')\n\n       lg.append(\"g\").attr(\"id\",\"legend_blocks\")\n         .call(that.colorbox,[150,8],d3.scaleDivergingSymlog([that.extent_m,0.7*that.extent_m+0.3*that.extent_M,that.extent_M], function(t){return d3.interpolateBlues(t);}))\n         .attr(\"transform\",`translate(${35},${-10})`)\n\n        d3.select(\"#legend_blocks\")\n          .append(\"g\")\n          .call(d3.axisBottom(d3.scaleLinear().domain([that.extent_M/1000000000000,that.extent_m/10000000000]).range([150,0])).ticks(5).tickSize(3))\n          .attr(\"transform\",\"translate(0,8)\")\n\n\n        d3.select(\"#legend_blocks\") \n          .append(\"text\")\n          .text(\"Effective Balance(gwei)\")\n          .attr(\"transform\",\"translate(60,-5)\")\n          .attr(\"font-size\",\"9px\")\n\n       lg.append(\"g\").attr(\"id\",\"legend_casper\")\n         .call(that.colorbox,[150,8],d3.scaleDiverging([that.h,0.5*that.h+0.5*that.q,that.q], function(t){return d3.interpolatePurples(t);}))\n         .attr(\"transform\",`translate(${35},${100})`)\n\n        d3.select(\"#legend_casper\")\n          .append(\"g\")\n          .call(d3.axisTop(d3.scaleLinear().domain([that.extent_M/1000000000000,that.extent_m/10000000000]).range([150,0])).ticks(5).tickSize(3))\n          .attr(\"transform\",\"translate(0,0)\")\n\n\n        d3.select(\"#legend_casper\") \n          .append(\"text\")\n          .text(\"Effective Balance(gwei)\")\n          .attr(\"transform\",\"translate(60,20)\")\n          .attr(\"font-size\",\"9px\")\n     \n     }\n  },\n\n  created(){\n    //this.xScale();\n  },\n  beforeUnmount() {\n      clearInterval(this.timer);\n    },\n  watch:{\n    slot(){\n      console.log('slot changed')\n      d3.select('#Slot').selectAll('g').remove()\n        this.xScale();\n        this.drawArc();\n        this.drawBlockheader();\n        this.drawCasper();\n        this.drawExBlocks();\n        this.drawDelay();\n        this.Legend();\n    },\n    message(){\n        this.getSlot();\n        d3.select('#Slot').selectAll('g').remove()\n        console.log(\"draw\");\n      }\n    }\n\n}\n</script>\n\n<style scoped>\n.tooltip_delay{\n    position: absolute;\n    padding-left:5px;\n    padding-right:5px;\n    width:auto;\n    height:auto;\n    border:1px solid #2ea44f;\n    border-radius:5px;\n    background-color: white;\n    font-size: 8px;\n    text-align: center;\n    opacity:0;\n    z-index:999;\n\t\t}\n\n.panel-header {\n  position: absolute;\n  left:0px;\n  top:250px;\n  padding: -10px 20px;\n  width: 45px;\n  height: 18px;\n  line-height: 18px;\n  font-size: 8px;\n  text-align: left;\n  background: #415c68;\n  color: #fcfcfc;\n  display: flex;\n  font-weight: bold;\n  border-radius: 1px;\n  box-shadow: 0 1px 2px rgba(26 26 26 0.2);\n  z-index:99;\n\n}\n\n.panel-header-end {\n  position: absolute;\n  top: 250px;\n  left: 61px;\n  border-top: 18px solid #455a64;\n  border-right: 18px solid #ffffff;\n  border-bottom: 0px solid #ffffff;\n  z-index:98;\n}\n\n</style>\n"]}]}