{"remainingRequest":"D:\\复旦大三上\\区块链量化交易行为可视分析\\Blockchain-Quantitative-Trading-Behaviors-Visualization\\Frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\复旦大三上\\区块链量化交易行为可视分析\\Blockchain-Quantitative-Trading-Behaviors-Visualization\\Frontend\\src\\components\\Candlestick.vue?vue&type=template&id=04794223&scoped=true","dependencies":[{"path":"D:\\复旦大三上\\区块链量化交易行为可视分析\\Blockchain-Quantitative-Trading-Behaviors-Visualization\\Frontend\\src\\components\\Candlestick.vue","mtime":1668580036920},{"path":"D:\\复旦大三上\\区块链量化交易行为可视分析\\Blockchain-Quantitative-Trading-Behaviors-Visualization\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657630378692},{"path":"D:\\复旦大三上\\区块链量化交易行为可视分析\\Blockchain-Quantitative-Trading-Behaviors-Visualization\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1657630379770},{"path":"D:\\复旦大三上\\区块链量化交易行为可视分析\\Blockchain-Quantitative-Trading-Behaviors-Visualization\\Frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1657630376233},{"path":"D:\\复旦大三上\\区块链量化交易行为可视分析\\Blockchain-Quantitative-Trading-Behaviors-Visualization\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1657630378692},{"path":"D:\\复旦大三上\\区块链量化交易行为可视分析\\Blockchain-Quantitative-Trading-Behaviors-Visualization\\Frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1657630374383}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGRpdiBpZCA9ICJUaXAiPgogICAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGVyIj5DYW5kbGVzdGljazwvZGl2PgogICAgPGRpdiBjbGFzcz0icGFuZWwtaGVhZGVyLWVuZCI+PC9kaXY+CiAgICA8c3ZnIGlkID0gIkNhbmRsZXN0aWNrIiAgY2xhc3M9ImNhbmRsZXN0aWNrIiBzdHlsZSA9ICd3aWR0aDo4MTBweDsgaGVpZ2h0OjM0MHB4Jz4KICAgIDwvc3ZnPgogICAgPGRpdiBjbGFzcz0idG9vbHRpcCI+PC9kaXY+CiAgICA8ZGl2IGNsYXNzPSJ0b29sdGlwMiI+PC9kaXY+CiAgPC9kaXY+Cg=="},{"version":3,"sources":["D:\\复旦大三上\\区块链量化交易行为可视分析\\Blockchain-Quantitative-Trading-Behaviors-Visualization\\Frontend\\src\\components\\Candlestick.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IACb,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAChF,CAAC,CAAC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC1B,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC7B,CAAC,CAAC,CAAC,CAAC,CAAC","file":"D:/复旦大三上/区块链量化交易行为可视分析/Blockchain-Quantitative-Trading-Behaviors-Visualization/Frontend/src/components/Candlestick.vue","sourceRoot":"","sourcesContent":["<template>\n  <div id = \"Tip\">\n    <div class=\"panel-header\">Candlestick</div>\n    <div class=\"panel-header-end\"></div>\n    <svg id = \"Candlestick\"  class=\"candlestick\" style = 'width:810px; height:340px'>\n    </svg>\n    <div class=\"tooltip\"></div>\n    <div class=\"tooltip2\"></div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n//import moment from 'moment'\nimport * as d3 from 'd3'\n\nexport default {\n  name:'Candlestick',\n  data(){\n    return {\n      market:[],\n      width: 780,\n      height: 330,\n      margin:{\n        top:40,\n        right:20,\n        bottom:10,\n        left:25\n      },\n      r:10,\n      c:20,\n      startday:\"\",\n      flag:\"\",\n      timegap:100,\n      pricegap:1,\n      timelist:[],\n      pricelist:[],\n      heat_aggregated:[]\n    };\n  },\n  mounted(){\n    this.Scale();\n  },\n  computed:{\n    markets(){\n      console.log(this.market)\n      return this.market;\n    },\n    innerWidth(){\n      return this.width - this.margin.left - this.margin.right\n    },\n    innerHeight(){\n      return this.height - this.margin.top - this.margin.bottom\n    }\n  },  \n\n  methods:{\n     getMarket(){\n      const path = 'http://127.0.0.1:5000/Candlestick/?year='+ eval('2022')+'&month='+eval('2')+'&day='+eval('21');\n      axios\n         .get(path)\n         .then(res => {\n           console.log(res.data);\n           this.market=res.data;\n           this.startday=this.market[0].date;\n         })\n         .catch(error => {\n           console.error(error);\n         });\n     },\n\n     Scale(){\n      //const gap = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]\n      const g = d3.select('#Candlestick').append('g').attr('id', 'marketscale')\n                  .attr('transform', `translate(${this.margin.left},${this.margin.top})`);\n      var b = d3.max(this.market, function(d){return d['high']});\n      var a = d3.min(this.market, function(d){return d['low']});\n      // var [a,b] = d3.extent(this.market, function(d){return d3.extent(d['bid5_price'],d['ask5_price']);})\n      let that = this;\n      const xscale = d3.scaleLinear()\n                       .domain([0,that.c])\n                       .range([0, this.innerWidth]);\n      const yscale = d3.scaleLinear()\n                       .domain([b,a])\n                       .range([0, this.innerHeight]);\n      console.log([a,b])\n      const yaxis = d3.axisLeft(yscale)\n                      .ticks(10)\n                      .tickSize(5)\n                      .tickPadding(5);\n      const xaxis = d3.axisBottom(xscale)\n                      .ticks(20)\n                      .tickSize(-5)\n                      .tickPadding(-15)\n                      .tickFormat(function(d,i){\n                        return (i>0)?(that.market[i-1]['date']):\"\"\n                      })\n                     g.append('g').call(yaxis)\n                      .attr('id' ,'yaxis');\n                     g.append('g').call(xaxis)\n                      .attr('id', 'xaxis');\n\n  },\n\n  Candle(){\n    let that = this;\n    const b = d3.max(this.market, function(d){return d['high']});\n    const a = d3.min(this.market, function(d){return d['low']});\n    const xscale = d3.scaleLinear()\n                       .domain([0,that.c])\n                       .range([0, this.innerWidth]);\n    const yscale = d3.scaleLinear()\n                       .domain([b,a])\n                       .range([0, this.innerHeight]);\n    const g = d3.select('#Candlestick').append('g').attr('id', 'marketview1')\n                .attr('transform', `translate(${this.margin.left},${this.margin.top})`);\n    g.selectAll(\"rect\")\n     .data(that.market).enter()\n     .append(\"rect\")\n     .attr('width',that.innerWidth/that.c-20)\n     .attr('height',function(d){\n      return Math.abs(yscale(d['open'])-yscale(d['close']));\n     })\n     .attr(\"x\",function(d,i){return xscale(i+1)-that.innerWidth/2/that.c+10;})\n     .attr(\"y\",function(d){return yscale(d['open']>d['close']?d['open']:d['close']);})\n     .attr(\"fill\",function(d){return d['open']<d['close']?\"green\":\"red\";})\n\n     d3.select('#Candlestick').append('g').attr('id','marketview2')\n       .attr('transform', `translate(${this.margin.left},${this.margin.top})`)  \n       .selectAll(\"rect\")\n       .data(that.market).enter()\n       .append(\"rect\")\n       .attr('width',5)\n       .attr('height',function(d){\n        return yscale(d['low'])-yscale(d['close']);\n       })\n       .attr(\"x\",function(d,i){return xscale(i+1)-2.5;})\n       .attr(\"y\",function(d){return yscale(d['close']);})\n       .attr(\"fill\",function(d){return d['open']<d['close']?\"green\":\"red\";})\n\n       \n     d3.select('#Candlestick').append('g').attr('id','marketview3')\n       .attr('transform', `translate(${this.margin.left},${this.margin.top})`)\n       .selectAll(\"rect\")\n       .data(that.market).enter()\n       .append(\"rect\")\n       .attr('width',5)\n       .attr('height',function(d){\n        return yscale(d['open'])-yscale(d['high']);\n       })\n       .attr(\"x\",function(d,i){return xscale(i+1)-2.5;})\n       .attr(\"y\",function(d){return yscale(d['high']);})\n       .attr(\"fill\",function(d){return d['open']<d['close']?\"green\":\"red\";})\n  },\n\n  colorbox(sel, size, colors){\n    var [x0,x1] = d3.extent( colors.domain());\n    var bars = d3.range( x0, x1, (x1-x0)/size[1]);\n    var sc = d3.scaleLinear()\n        .domain([x0,x1]).range([0, size[1]]);\n    sel.selectAll(\"line\").data(bars).enter().append(\"line\")\n      .attr(\"x1\", 0).attr(\"x2\",size[0])\n      .attr(\"y1\", sc).attr(\"y2\",sc)\n      .attr(\"stroke\",colors);\n    \n    sel.append(\"rect\")\n        .attr(\"width\",size[0]).attr(\"height\",size[1])\n        .attr(\"fill\",\"none\").attr(\"stroke\",\"black\")\n      }\n  },\n  created(){\n    this.getMarket();\n  },\n  beforeUnmount() {\n  },\n  watch:{\n    markets(){\n      d3.selectAll('#marketview').remove();\n      this.Scale();\n      this.Candle();\n    }\n  }\n};\n</script>\n\n<style scoped>\n.tooltip{\n    position: absolute;\n    padding-left:5px;\n    padding-right:5px;\n    width:auto;\n    height:auto;\n    border:1px solid #2ea44f;\n    border-radius:5px;\n    background-color: white;\n    font-size: 8px;\n    text-align: center;\n    opacity:0;\n    z-index:999;\n\t\t}\n\n.tooltip2{\n  position:absolute;\n  left:0px;\n  top:0px;\n  width:auto;\n  height:auto;\n  border:2px solid lightcoral;\n  border-radius:5px;\n  padding-left:1px;\n  padding-right:1px;\n  padding-top:1px;\n  padding:1px;\n  background-color: white;\n  font-size: 1px;\n  text-align: center;\n  opacity:0;\n  z-index:99;\n}\n.panel-header {\n  position: absolute;\n  left:0px;\n  top:0px;\n  padding: -10px 20px;\n  width: 90px;\n  height: 18px;\n  line-height: 18px;\n  font-size: 8px;\n  text-align: left;\n  background: #415c68;\n  color: #fcfcfc;\n  display: flex;\n  font-weight: bold;\n  border-radius: 1px;\n  box-shadow: 0 1px 2px rgba(26 26 26 0.2);\n  z-index:99;\n\n}\n\n.panel-header-end {\n  position: absolute;\n  top: 0px;\n  left:90px;\n  border-top: 18px solid #455a64;\n  border-right: 18px solid #ffffff;\n  border-bottom: 0px solid #ffffff;\n  z-index:98;\n}\n</style>\n"]}]}