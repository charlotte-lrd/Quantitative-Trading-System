{"remainingRequest":"D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js??ref--6!D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\src\\components\\Classics.vue?vue&type=template&id=289201d1&scoped=true","dependencies":[{"path":"D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\src\\components\\Classics.vue","mtime":1681771800673},{"path":"D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681689632845},{"path":"D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1681689632610},{"path":"D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\node_modules\\vue-loader-v16\\dist\\templateLoader.js","mtime":1681689645265},{"path":"D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1681689632845},{"path":"D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1681689645258}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlVk5vZGUgYXMgX2NyZWF0ZVZOb2RlLCBjcmVhdGVDb21tZW50Vk5vZGUgYXMgX2NyZWF0ZUNvbW1lbnRWTm9kZSwgRnJhZ21lbnQgYXMgX0ZyYWdtZW50LCBvcGVuQmxvY2sgYXMgX29wZW5CbG9jaywgY3JlYXRlQmxvY2sgYXMgX2NyZWF0ZUJsb2NrLCB3aXRoU2NvcGVJZCBhcyBfd2l0aFNjb3BlSWQsIHB1c2hTY29wZUlkIGFzIF9wdXNoU2NvcGVJZCwgcG9wU2NvcGVJZCBhcyBfcG9wU2NvcGVJZCB9IGZyb20gInZ1ZSI7Cgpjb25zdCBfd2l0aElkID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgiZGF0YS12LTI4OTIwMWQxIik7CgpfcHVzaFNjb3BlSWQoImRhdGEtdi0yODkyMDFkMSIpOwoKY29uc3QgX2hvaXN0ZWRfMSA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImRpdiIsIHsKICBpZDogIlRpcCIKfSwgWy8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImRpdiIsIHsKICBjbGFzczogInBhbmVsLWhlYWRlciIKfSwgIuWbnua1i+e7k+aenCIpLCAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgY2xhc3M6ICJwYW5lbC1oZWFkZXItZW5kIgp9KSwgLyojX19QVVJFX18qL19jcmVhdGVWTm9kZSgic3ZnIiwgewogIGlkOiAiQ2xhc3NpY3MiLAogIGNsYXNzOiAiY2xhc3NpYyIsCiAgc3R5bGU6IHsKICAgICJ3aWR0aCI6ICI4MTBweCIsCiAgICAiaGVpZ2h0IjogIjM3MHB4IgogIH0KfSksIC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImRpdiIsIHsKICBjbGFzczogInRvb2x0aXAiCn0pLCAvKiNfX1BVUkVfXyovX2NyZWF0ZVZOb2RlKCJkaXYiLCB7CiAgY2xhc3M6ICJ0b29sdGlwMiIKfSksIC8qI19fUFVSRV9fKi9fY3JlYXRlQ29tbWVudFZOb2RlKCJidXR0b24gaWQgPSAnQVRSJyBAY2xpY2sgPSAnZ2V0QVRSKCksU2NhbGUoKSxEcmF3KCknPkFUUjwvYnV0dG9uIiksIC8qI19fUFVSRV9fKi9fY3JlYXRlQ29tbWVudFZOb2RlKCJidXR0b24gaWQgPSAnRFQnIEBjbGljayA9ICd0cmlhbCgpJz5EdWFsIFRocnVzdDwvYnV0dG9uIiksIC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImZvcm0iLCB7CiAgYWN0aW9uOiAic3RyYXRlZ3k9Y3VzdG9tIiwKICBtZXRob2Q6ICJwb3N0IiwKICBlbmN0eXBlOiAibXVsdGlwYXJ0L2Zvcm0tZGF0YSIKfSwgWy8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImlucHV0IiwgewogIGNsYXNzOiAiY3VzdG9tLXN0cmF0ZWd5IGZpbGUiLAogIHR5cGU6ICJmaWxlIiwKICBuYW1lOiAiZmlsZSIKfSksIC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImlucHV0IiwgewogIGNsYXNzOiAiY3VzdG9tLXN0cmF0ZWd5IHVwbG9hZCIsCiAgdHlwZTogInN1Ym1pdCIsCiAgdmFsdWU6ICJVcGxvYWQiCn0pXSldLCAtMQovKiBIT0lTVEVEICovCik7Cgpjb25zdCBfaG9pc3RlZF8yID0gewogIGNsYXNzOiAiY29udGVudC1sZWZ0Igp9OwoKY29uc3QgX2hvaXN0ZWRfMyA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImRpdiIsIHsKICBjbGFzczogInNlZyIKfSwgbnVsbCwgLTEKLyogSE9JU1RFRCAqLwopOwoKY29uc3QgX2hvaXN0ZWRfNCA9IHsKICBjbGFzczogIm5hdiIKfTsKY29uc3QgX2hvaXN0ZWRfNSA9IHsKICBjbGFzczogIm5hdi1tZW51Igp9OwoKY29uc3QgX2hvaXN0ZWRfNiA9IC8qI19fUFVSRV9fKi9fY3JlYXRlVk5vZGUoImRpdiIsIHsKICBjbGFzczogIm5hdi10aXRsZSIKfSwgIue7j+WFuOetlueVpSIsIC0xCi8qIEhPSVNURUQgKi8KKTsKCmNvbnN0IF9ob2lzdGVkXzcgPSB7CiAgY2xhc3M6ICJuYXYtY29udGVudCIKfTsKCl9wb3BTY29wZUlkKCk7CgpleHBvcnQgY29uc3QgcmVuZGVyID0gLyojX19QVVJFX18qL193aXRoSWQoKF9jdHgsIF9jYWNoZSwgJHByb3BzLCAkc2V0dXAsICRkYXRhLCAkb3B0aW9ucykgPT4gewogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIFtfaG9pc3RlZF8xLCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzIsIFtfaG9pc3RlZF8zLCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzQsIFtfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzUsIFtfaG9pc3RlZF82LCBfY3JlYXRlVk5vZGUoImRpdiIsIF9ob2lzdGVkXzcsIFtfY3JlYXRlVk5vZGUoImEiLCB7CiAgICBpZDogIlItYnJlYWtlciIsCiAgICBvbkNsaWNrOiBfY2FjaGVbMV0gfHwgKF9jYWNoZVsxXSA9ICRldmVudCA9PiAkb3B0aW9ucy5nZXRTdHJhdGVneSgiUl9icmVha2VyIikpCiAgfSwgIlItYnJlYWtlciIpLCBfY3JlYXRlVk5vZGUoImEiLCB7CiAgICBpZDogIkFUUiIsCiAgICBvbkNsaWNrOiBfY2FjaGVbMl0gfHwgKF9jYWNoZVsyXSA9ICRldmVudCA9PiAkb3B0aW9ucy5nZXRTdHJhdGVneSgiQVRSIikpCiAgfSwgIkFUUiIpLCBfY3JlYXRlVk5vZGUoImEiLCB7CiAgICBpZDogIkR1YWwgVGhydXN0IiwKICAgIG9uQ2xpY2s6IF9jYWNoZVszXSB8fCAoX2NhY2hlWzNdID0gJGV2ZW50ID0+ICRvcHRpb25zLmdldFN0cmF0ZWd5KCJEdWFsX1RocnVzdCIpKQogIH0sICJEdWFsIFRocnVzdCIpXSldKV0pXSldLCA2NAogIC8qIFNUQUJMRV9GUkFHTUVOVCAqLwogICk7Cn0pOw=="},{"version":3,"sources":["D:\\UPenn大三下\\Denghui Project\\Quantitative-Trading-System\\Framework\\Frontend\\src\\components\\Classics.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div id = \"Tip\">\r\n      <div class=\"panel-header\">回测结果</div>\r\n      <div class=\"panel-header-end\"></div>\r\n      <svg id = \"Classics\"  class=\"classic\" style = 'width:810px; height:370px'>\r\n      </svg>\r\n      <div class=\"tooltip\"></div>\r\n      <div class=\"tooltip2\"></div>\r\n      <!--button id = 'ATR' @click = 'getATR(),Scale(),Draw()'>ATR</button-->\r\n      <!--button id = 'DT' @click = 'trial()'>Dual Thrust</button-->\r\n    <form action=\"strategy=custom\" method=post enctype=multipart/form-data>\r\n         <input class=\"custom-strategy file\" type=file name=file>\r\n         <input  class=\"custom-strategy upload\" type=submit value=Upload>\r\n    </form>\r\n    </div>\r\n    <div class=\"content-left\">\r\n      <div class=\"seg\"></div>\r\n      <div class=\"nav\">\r\n        <div class=\"nav-menu\">\r\n          <div class=\"nav-title\">经典策略</div>\r\n          <div class=\"nav-content\">\r\n            <a id=\"R-breaker\" @click='getStrategy(\"R_breaker\")'>R-breaker</a>\r\n            <a id=\"ATR\" @click='getStrategy(\"ATR\")'>ATR</a>\r\n            <a id=\"Dual Thrust\" @click='getStrategy(\"Dual_Thrust\")'>Dual Thrust</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n  import axios from 'axios'\r\n  import * as d3 from 'd3'\r\n  \r\n  export default {\r\n    name:'Classics',\r\n    data(){\r\n      return {\r\n        asset:[],\r\n        investvalue:[],\r\n        TR:[],\r\n        ATR_param:{\r\n          k:10,\r\n          N:20\r\n        },\r\n        DT_param:{\r\n          k:5\r\n        },\r\n        ATR_bounds:[],\r\n        Unit:[],\r\n        width: 780,\r\n        height: 330,\r\n        margin:{\r\n          top:40,\r\n          right:20,\r\n          bottom:10,\r\n          left:55\r\n        },\r\n        r:10,\r\n        c:20,\r\n        startday:\"\",\r\n        flag:0,\r\n        timegap:100,\r\n        pricegap:1\r\n      }\r\n    },\r\n    mounted(){\r\n      //this.Scale();\r\n    },\r\n    computed:{\r\n      innerWidth(){\r\n        return this.width - this.margin.left - this.margin.right\r\n      },\r\n      innerHeight(){\r\n        return this.height - this.margin.top - this.margin.bottom\r\n      }\r\n    },\r\n    methods:{\r\n       trial(){\r\n        this.flag+=1;\r\n        console.log(this.flag);\r\n       },\r\n       getStrategy(strategy){\r\n        const path = \"http://127.0.0.1:5000/P0806.DCE/st=20230101ed=20230410freq=D/strategy=\"+strategy;\r\n        axios\r\n           .get(path)\r\n           .then(res => {\r\n             this.asset=res.data;\r\n             console.log(this.asset);\r\n             this.flag += 1;\r\n           })\r\n           .catch(error => {\r\n             console.error(error);\r\n           });\r\n           console.log(this.asset);\r\n       },\r\n       getAsset(){\r\n        const path = 'http://127.0.0.1:5000/Sample/A';\r\n        axios\r\n           .get(path)\r\n           .then(res => {\r\n             this.asset=res.data;\r\n             console.log(this.asset);\r\n             this.flag += 1;\r\n             console.log(this.flag);\r\n           })\r\n           .catch(error => {\r\n             console.error(error);\r\n           });\r\n\r\n       },\r\n       getATR(){\r\n        let i = 0;\r\n        while(i < this.asset.length){\r\n          this.TR.push(Math.max(this.asset[i]['high']-this.asset[i]['low'],Math.abs(this.asset[i]['high']-this.asset[i]['PDC']),Math.abs(this.asset[i]['PDC']-this.asset[i]['low'])));\r\n          i = i + 1;\r\n        }\r\n        console.log(this.TR)\r\n        i = 0;\r\n        while(i < this.asset.length){\r\n          if(i>=this.ATR_param.k){\r\n            if(i >= this.ATR_param.N - 1){\r\n              let s = {};\r\n              s['Up'] = d3.max(this.asset.slice(i-this.ATR_param.k,i),function(d){return d['high']});\r\n              s['Down'] = d3.min(this.asset.slice(i-this.ATR_param.k,i),function(d){return d['low']});\r\n              s['ATR'] = d3.mean(this.TR.slice(i-this.ATR_param.N+1,i+1));\r\n              this.ATR_bounds.push(s);\r\n            }\r\n            else{\r\n              let s = {};\r\n              s['Up'] = d3.max(this.asset.slice(i-this.ATR_param.k,i),function(d){return d['high']});\r\n              s['Down'] = d3.min(this.asset.slice(i-this.ATR_param.k,i),function(d){return d['low']});\r\n              s['ATR'] = 0;\r\n              this.ATR_bounds.push(s);\r\n            }\r\n          }else{\r\n            if(i >= this.ATR_param.N - 1){\r\n              let s = {};\r\n              s['Up'] = 0;\r\n              s['Down'] = 0;\r\n              s['ATR'] = d3.mean(this.asset.slice(i-this.ATR_param.N+1,i+1));\r\n              this.ATR_bounds.push(s);\r\n            }\r\n            else{\r\n              let s = {};\r\n              s['Up'] = 0;\r\n              s['Down'] = 0;\r\n              s['ATR'] = 0;\r\n              this.ATR_bounds.push(s);\r\n            }\r\n          }\r\n          i = i + 1;\r\n        }\r\n        console.log(this.ATR_bounds);\r\n        i = 0;\r\n        while(i<this.ATR_bounds.length){\r\n          this.Unit.push(0);\r\n          i = i + 1;\r\n        }\r\n        i = 0;\r\n        let prev_price = this.asset[0]['current'];\r\n        while(i<this.ATR_bounds.length){\r\n          if (i==0) {\r\n            if (this.asset[i]['current']>this.ATR_bounds[i]['Up']) {\r\n              prev_price = this.asset[i]['current'];\r\n              this.Unit[i] += 1;\r\n            }else{\r\n              if (this.asset[i]['current']<this.ATR_bounds[i]['Down']){\r\n                prev_price = this.asset[i]['current'];\r\n                this.Unit[i] -= 1;\r\n              }\r\n            }\r\n          }else{\r\n            if(this.Unit[i-1]==0){\r\n              if (this.asset[i]['current']>this.ATR_bounds[i]['Up']) {\r\n                prev_price = this.asset[i]['current'];\r\n                this.Unit[i]=this.Unit[i-1]+1;\r\n              }else{\r\n                if (this.asset[i]['current']<this.ATR_bounds[i]['Down']) {\r\n                  prev_price = this.asset[i]['current'];\r\n                  this.Unit[i] =  this.Unit[i-1]-1;\r\n                }\r\n              }\r\n            }\r\n            if (this.Unit[i-1]>0) {\r\n              if (this.asset[i]['current']>prev_price+0.5*this.ATR_bounds[i]['ATR']){\r\n                this.Unit[i] = this.Unit[i-1]+1;\r\n                prev_price = this.asset[i]['current'];\r\n              }else{\r\n                if(this.asset[i]['current']<prev_price-2*this.ATR_bounds[i]['ATR']){\r\n                  this.Unit[i] = 0;\r\n                }else{\r\n                  if(this.asset[i]['current']<this.ATR_bounds[i]['Down']){\r\n                  this.Unit[i] = 0;\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (this.Unit[i-1]<0) {\r\n              if (this.asset[i]['current'] < prev_price - 0.5*this.ATR_bounds[i]['ATR']){\r\n                this.Unit[i] = this.Unit[i-1]-1;\r\n                prev_price = this.asset[i]['current'];\r\n              }else{\r\n                if(this.asset[i]['current'] > prev_price + 2*this.ATR_bounds[i]['ATR']){\r\n                  this.Unit[i] = 0;\r\n                }else{\r\n                  if(this.asset[i]['current']>this.ATR_bounds[i]['Up']){\r\n                  this.Unit[i] = 0;\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        i = i+1;\r\n      }\r\n      console.log(this.Unit);\r\n\r\n      i = 0;\r\n      while(i<this.asset.length){\r\n        if(i==0)\r\n          this.investvalue.push(this.asset[i]['current']*this.Unit[i]);\r\n        else\r\n          this.investvalue.push(this.investvalue[i-1]+this.asset[i]['current']*this.Unit[i]);\r\n        i = i + 1;\r\n      }\r\n      console.log(this.investvalue);\r\n      },\r\n\r\n      getInvestvalue(){\r\n        console.log(\"getinvest\");\r\n        let i = 0;\r\n        while(i<this.asset.length){\r\n          this.investvalue.push(this.asset[i]['total_cash']);\r\n          i = i + 1;\r\n        }\r\n        console.log(this.investvalue);\r\n      },\r\n\r\n      //Scale函数用来画出坐标轴\r\n       Scale(){\r\n        d3.select('#classicscale').remove()\r\n        const g = d3.select('#Classics').append('g').attr('id', 'classicscale')\r\n                    .attr('transform', `translate(${this.margin.left},${this.margin.top})`);\r\n        var [a,b] = d3.extent(this.investvalue);\r\n        let that = this;\r\n        const xscale = d3.scaleLinear()\r\n                         .domain([0,that.investvalue.length])\r\n                         .range([0, this.innerWidth]);\r\n        const yscale = d3.scaleLinear()\r\n                         .domain([b,a])\r\n                         .range([0, this.innerHeight]);\r\n        console.log([a,b])\r\n        const yaxis = d3.axisLeft(yscale)\r\n                        .ticks(10)\r\n                        .tickSize(5)\r\n                        .tickPadding(5);\r\n        const xaxis = d3.axisBottom(xscale)\r\n                        .ticks(20)\r\n                        .tickSize(-5)\r\n                        .tickPadding(-15)\r\n                        //.tickFormat(function(d,i){\r\n                        //   return that.asset[i][\"date\"];//.slice(11,16);\r\n                        //})\r\n                       g.append('g').call(yaxis)\r\n                        .attr('id' ,'yaxis');\r\n                       g.append('g').call(xaxis)\r\n                        .attr('id', 'xaxis');\r\n  \r\n    },\r\n       //ATR strategy的函数实现\r\n       Draw(){        \r\n        d3.select('#classicCurve').remove()\r\n\r\n        //选择id为'Classics'的svg，增添g并取id为classicCurve，移动画布使其与设置的margin对其\r\n        const g2 = d3.select('#Classics').append('g').attr('id', 'classicCurve')\r\n                    .attr('transform', `translate(${this.margin.left},${this.margin.top})`);\r\n        \r\n        //防止代码中将this错认为当前数据，用that代替全局的this\r\n        let that = this;\r\n\r\n        //设置旗帜为ATR，表示按下了ATR按钮\r\n        that.flag=\"ATR\";\r\n        \r\n        //设置x轴、y轴的映射函数，将数据映射到x、y轴坐标上\r\n        var [a,b] = d3.extent(this.investvalue);\r\n        const xscale = d3.scaleLinear()\r\n                         .domain([0,that.investvalue.length])\r\n                         .range([0, this.innerWidth]);\r\n        const yscale = d3.scaleLinear()\r\n                         .domain([b,a])\r\n                         .range([0, this.innerHeight]);\r\n\r\n        //设置折线图的映射函数，会将数据映射为每个点的坐标/每条线段的路径值\r\n        const line = d3.line()\r\n                       .x(function(d,i){return xscale(i)})\r\n                       .y(function(d){return yscale(d)})\r\n                       .curve(d3.curveLinear)\r\n      \r\n        //在g上增添路径path，并将目标画线的数据传入line映射函数中\r\n        g2.append('path')\r\n          .attr('d',line(that.investvalue))\r\n          .attr('fill','none')\r\n          .attr('stroke',\"#3366ff\")\r\n          //.attr(\"transform\", function(d) {\r\n          //  return `translate(${xscale(d['id'])+1.5},${yscale(d['price'])-5})`;\r\n          //})\r\n          //.on(\"mouseover\",function(){\r\n          //   let d =d3.select(this).data();\r\n          //   console.log(d);\r\n          //   var str = 'value:' + d[0];\r\n          //   var t = 60 + yscale(d[0])\r\n            \r\n          //   d3.selectAll('.tooltip')\r\n          //     .html(str)\r\n          //     .style(\"left\", (xscale(d[0]['id'])+35)+\"px\")\r\n          //     .style(\"top\", (t+270)+\"px\")\r\n          //     .style(\"opacity\",1.0);\r\n          //})\r\n          //.on(\"mouseleave\",function(){\r\n          //   d3.selectAll('.tooltip')\r\n          //     .style(\"opacity\",0.0);\r\n          //})\r\n       },\r\n\r\n       //Dual Thrust strategy的函数实现\r\n       DT(){\r\n        d3.select('#classicCurve').remove()\r\n        console.log(\"Dual Thrust\")\r\n       },\r\n       \r\n    colorbox(sel, size, colors){\r\n      var [x0,x1] = d3.extent( colors.domain());\r\n      var bars = d3.range( x0, x1, (x1-x0)/size[1]);\r\n      var sc = d3.scaleLinear()\r\n          .domain([x0,x1]).range([0, size[1]]);\r\n      sel.selectAll(\"line\").data(bars).enter().append(\"line\")\r\n        .attr(\"x1\", 0).attr(\"x2\",size[0])\r\n        .attr(\"y1\", sc).attr(\"y2\",sc)\r\n        .attr(\"stroke\",colors);\r\n      \r\n      sel.append(\"rect\")\r\n          .attr(\"width\",size[0]).attr(\"height\",size[1])\r\n          .attr(\"fill\",\"none\").attr(\"stroke\",\"black\")\r\n        }\r\n    },\r\n    created(){\r\n      //this.getAsset();\r\n    },\r\n    beforeUnmount() {\r\n    },\r\n    watch:{\r\n      asset(){\r\n        // console.log(\"getasset\");\r\n        this.getInvestvalue();\r\n        this.Scale();\r\n        this.Draw();\r\n    }\r\n  }\r\n  };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  .tooltip{\r\n      position: absolute;\r\n      padding-left:5px;\r\n      padding-right:5px;\r\n      width:auto;\r\n      height:auto;\r\n      border:1px solid #2ea44f;\r\n      border-radius:5px;\r\n      background-color: white;\r\n      font-size: 8px;\r\n      text-align: center;\r\n      opacity:0;\r\n      z-index:999;\r\n          }\r\n  \r\n  .tooltip2{\r\n    position:absolute;\r\n    left:0px;\r\n    top:0px;\r\n    width:auto;\r\n    height:auto;\r\n    border:2px solid lightcoral;\r\n    border-radius:5px;\r\n    padding-left:1px;\r\n    padding-right:1px;\r\n    padding-top:1px;\r\n    padding:1px;\r\n    background-color: white;\r\n    font-size: 1px;\r\n    text-align: center;\r\n    opacity:0;\r\n    z-index:99;\r\n  }\r\n  .panel-header {\r\n    position: absolute;\r\n    top: 55px;\r\n    left:170px;\r\n    padding: 2px 2px-2px 20px;\r\n    width: 60px;\r\n    height: 22px;\r\n    line-height: 18px;\r\n    font-size: 6px;\r\n    text-align: right;\r\n    background: #415c68;\r\n    color: #fcfcfc;\r\n    display: flex;\r\n    justify-content:space-evenly;\r\n    align-items: center;\r\n    align-content:stretch;\r\n    font-weight: bold;\r\n    border-radius: 1px;\r\n    box-shadow: 0 1px 2px rgba(26 26 26 0.2);\r\n    z-index:99;\r\n  }\r\n  \r\n  .panel-header-end {\r\n    position: absolute;\r\n    top: 55px;\r\n    left:230px;\r\n    border-top: 22px solid #455a64;\r\n    border-right: 22px solid #ffffff;\r\n    border-bottom: 0px solid #ffffff;\r\n    z-index:98;\r\n  }\r\n  .content-left{\r\n    width:12%;\r\n    height:600px;\r\n    background-color: #1c232f;\r\n    float:left;\r\n  }\r\n  .left-title{\r\n    height:50px;\r\n    width:10px;\r\n  }\r\n  .left-title>a{\r\n    display: block;\r\n    width:100%;\r\n    height:50px;\r\n    line-height: 50px;\r\n    text-align:center;\r\n    color:white;\r\n    text-decoration: none;\r\n  }\r\n  .seg{\r\n    height:1px;\r\n    width:100%;\r\n    background-color: black;\r\n  }\r\n  .nav{\r\n    margin-top:5px;\r\n  }\r\n  .nav-title{\r\n    height:40px;\r\n    width:100%;\r\n    color:white;\r\n    text-align:center;\r\n    line-height:40px;\r\n    cursor:pointer;\r\n  }\r\n  .nav-content{\r\n    width:100%;\r\n    height:100%;\r\n    background-color: #0c1119;\r\n  }\r\n  .nav-content>a{\r\n    display:block;\r\n    height:30px;\r\n    width:100%;\r\n    color:#CCCCCC;\r\n    text-decoration: none;\r\n    text-align:center;\r\n    line-height:30px;\r\n  }\r\n  .nav-content>a:hover{\r\n    display:block;\r\n    height:30px;\r\n    width:100%;\r\n    color:#ffffff;\r\n    text-decoration: none;\r\n    text-align:center;\r\n    line-height:30px;\r\n    background-color: #12040c;\r\n  }\r\n  .custom-strategy{\r\n    position:absolute;\r\n    top:500px;\r\n  }\r\n  .file{\r\n    left:200px;\r\n  }\r\n  .upload{\r\n    left:400px;\r\n  }\r\n  </style>\r\n  "],"sourceRoot":""}]}